{% extends "base.html" %}

{% block title %}Precon Survey: {{ participant.name }}{% endblock %}

{% block page_title %}Precon Survey: {{ participant.name }}{% endblock %}

{% block extra_css %}
   <style>
   textarea {
    height: 4em;
    width: 40em;
   }
   label.required {
    font-weight: bold;
   }
   blockquote {
    width: 35em;
   }
   form.record-responses {
    max-width: 40em;
   }
   div.survey-section {
    background-color: #eee;
    padding: 1em;
    min-width: 44em;
   }
   </style>
{% endblock %}

{% block content %}

    <form class="record-responses" enctype="multipart/form-data" action="{% url 'record_responses' nonce=participant.nonce %}" method="post">
        {% csrf_token %}

        <p>Fields in <b>bold</b> are required.</p>

        <hr />

        <div class="survey-section">
        <h3>About You</h3>
        {% include "precon/format_form_snippet.html" with form=participant_form %}
        </div>

        <hr />

        {% for pp, form in pps_forms %}
            <div class="survey-section">
            <h3>{{pp}}</h3>
            {% if pp.panelists.all %}
                <p>Presenters: {{pp.panelists.all|join:", "}}{% if pp.needs_panelists %} <i>(and you?)</i>{% endif %}</p>
            {% else %}
                <p>Presenters: <i>(your name here?)</i></p>
            {% endif %}
            <blockquote>{{ pp.blurb }}</blockquote>
            {% if not pp.needs_panelists %}
                <p><i>(This {{pp.type|lower}} has enough presenters already.)</i></p>
            {% endif %}
            {% include "precon/format_form_snippet.html" with form=form %}
            </div>
            
            <hr />
        {% endfor %}

        <div class="survey-section">
        {{ anything_else_form.as_p }}
        </div>

        <hr />

        <p class="submit-next">
            <input class="submitbutton" type="submit" value="Done!" />
        </p>
    </form>

{% endblock %}
